<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summer Development Plan Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is designed as a personal development dashboard with a fixed sidebar for navigation and a dynamic content area. This structure was chosen to transform the static plan into an active tool. The key sections are: 'Today's Plan' (the default view for immediate tasks), 'Weekly View' (for tactical planning), 'Learning Roadmap' (for strategic overview), 'Goals & Progress' (for motivation and tracking), 'Resources' (a quick-access library), and 'Job Application Strategy' (a dedicated section for career guidance). This task-oriented, dashboard approach prioritizes usability by showing the most relevant information first, while keeping the broader context easily accessible, which is more effective than a linear document. -->
    <!-- Visualization & Content Choices: 
        - Goals & Progress: Report Info (Apply to 50+ jobs) -> Goal (Track progress) -> Viz (Donut Chart via Chart.js for total, Bar Chart via Chart.js for daily additions) -> Interaction (Input field to update total and daily, now supporting positive and negative inputs for corrections, and triggering update on Enter key press) -> Justification (Donut for overall progress, Bar for granular daily activity, providing comprehensive and flexible tracking without any reset button for this section).
        - Today's Plan: Report Info (Daily Schedule) -> Goal (Provide a clear daily checklist) -> Presentation (Dynamically injected timeline of cards) -> Interaction (JS highlights current time block, checkboxes to mark tasks complete, Clear All Tasks button) -> Justification (Makes the daily plan actionable and interactive).
        - Learning Roadmap: Report Info (Monthly Focus) -> Goal (Organize strategic plan) -> Presentation (Dynamically injected collapsible accordion sections) -> Interaction (Click to expand/collapse, now with re-attached event listeners for dynamic content) -> Justification (Prevents information overload and keeps the view clean).
        - Resources: Report Info (List of links) -> Goal (Make resources findable) -> Presentation (Dynamically injected categorized list) -> Interaction (Live search/filter bar, Clear Search button) -> Justification (Improves usability by allowing quick lookups).
        - Job Application Strategy: Report Info (Comprehensive guidance text) -> Goal (Provide structured advice) -> Presentation (Dynamically rendered sections with headings and list items from structured JS data, using simplified HTML generation for robustness) -> Interaction (Tab click to display) -> Justification (Ensures content is presented clearly and dynamically, avoiding static HTML duplication, and explicitly sets title/description with robust error handling).
        - Weekly View Projects: Report Info (Weekly/Monthly project list) -> Goal (Show project progression) -> Presentation (Dynamically injected list grouped by month within Weekly View) -> Interaction (Display on tab click) -> Justification (Provides a clear overview of project deliverables alongside weekly routine).
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .sidebar-icon {
            width: 24px;
            height: 24px;
        }
        /* All content sections will be dynamically injected into #dynamic-content-area */
        /* No need for .content-section.active or display:none !important here */

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .task-card:has(input:checked) {
            opacity: 0.6;
        }
        .task-card:has(input:checked) label {
            text-decoration: line-through;
        }
        /* Specific styles for chart containers to ensure responsiveness and max-width */
        .chart-container {
            position: relative;
            width: 100%; /* Take full width of parent column */
            max-width: 400px; /* Limit max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 250px; /* Default height */
            max-height: 300px; /* Max height to prevent excessive vertical space */
        }
        /* Adjust height for larger screens */
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 350px;
            }
        }
        .daily-chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Wider for bar chart */
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .daily-chart-container {
                height: 350px;
                max-height: 450px;
            }
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div class="flex h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-20 lg:w-64 bg-white border-r border-stone-200 flex flex-col">
            <div class="flex items-center justify-center lg:justify-start lg:pl-6 h-16 border-b border-stone-200">
                <span class="text-teal-600">üí°</span>
                <h1 class="hidden lg:block ml-3 text-xl font-bold text-stone-800">Dev Plan</h1>
            </div>
            <nav class="flex-1 px-2 lg:px-4 py-6 space-y-2">
                <a href="#" data-tab="today" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700 bg-teal-50 text-teal-700">
                    <span class="sidebar-icon">üóìÔ∏è</span>
                    <span class="hidden lg:block ml-4 font-medium">Today's Plan</span>
                </a>
                <a href="#" data-tab="weekly" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700">
                    <span class="sidebar-icon">üìÖ</span>
                    <span class="hidden lg:block ml-4 font-medium">Weekly View</span>
                </a>
                <a href="#" data-tab="roadmap" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700">
                    <span class="sidebar-icon">üó∫Ô∏è</span>
                    <span class="hidden lg:block ml-4 font-medium">Learning Roadmap</span>
                </a>
                <a href="#" data-tab="goals" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700">
                    <span class="sidebar-icon">üéØ</span>
                    <span class="hidden lg:block ml-4 font-medium">Goals & Progress</span>
                </a>
                <a href="#" data-tab="resources" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700">
                    <span class="sidebar-icon">üìö</span>
                    <span class="hidden lg:block ml-4 font-medium">Resources</span>
                </a>
                <a href="#" data-tab="jobStrategy" class="nav-link flex items-center p-3 rounded-lg text-stone-600 hover:bg-teal-50 hover:text-teal-700">
                    <span class="sidebar-icon">üíº</span>
                    <span class="hidden lg:block ml-4 font-medium">Job Strategy</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="current-tab-title" class="text-3xl font-bold text-stone-800"></h2>
                <button id="clear-all-btn" class="px-4 py-2 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300 transition-colors hidden"></button>
            </div>
            <p id="current-tab-description" class="text-stone-500 mb-6"></p>
            
            <!-- Dynamic Content Area -->
            <div id="dynamic-content-area">
                <!-- All tab content will be injected here by JavaScript -->
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const appData = {
                dailySchedule: [
                    { time: "10:30 AM - 10:45 AM", task: "Morning: Theory & Concepts", details: "Review notes from yesterday, quick recap of previous concepts." },
                    { time: "10:45 AM - 11:30 AM", task: "Morning: Theory & Concepts", details: "Deep dive into a new concept (e.g., a specific CSS property, a JavaScript array method, a React hook, a Node.js module). Read documentation, watch a tutorial video." },
                    { time: "11:30 AM - 12:00 PM", task: "Morning: Theory & Concepts", details: "Take detailed notes, try out small code snippets related to the new concept." },
                    { time: "12:00 PM - 1:30 PM", task: "Afternoon: Hands-on Coding & Practice", details: "Work on a small coding challenge or exercise related to the morning's concept (e.g., freeCodeCamp challenge, LeetCode easy problem, build a tiny component)." },
                    { time: "1:40 PM - 3:10 PM", task: "Afternoon: Hands-on Coding & Practice", details: "Dedicate time to your current project. Implement a feature, debug an issue, refactor code. This is where theory meets practice." },
                    { time: "3:10 PM - 3:40 PM", task: "Evening: Review & Planning", details: "Quick review of what you learned and built today. Identify any lingering questions." },
                    { time: "3:40 PM - 4:10 PM", task: "Evening: Review & Planning", details: "Plan for tomorrow's learning. What concept will you tackle? What's the next step for your project? Update your learning roadmap." },
                    { time: "4:00 PM - 4:45 PM", task: "Optional Activity", details: "Browse developer news, read articles, or watch a short tech talk." }
                ],
                weeklySchedule: {
                    monToThu: { title: "Monday - Thursday: Focused Learning & Project Building", tasks: [
                        "Follow your daily plan.",
                        "Monday: Introduce a new core concept for the week (e.g., 'Flexbox,' 'Asynchronous JavaScript,' 'React State Management,' 'Express Routes').",
                        "Tuesday - Wednesday: Deepen understanding of the core concept. Apply it in your weekly mini-project.",
                        "Thursday: Continue project work, troubleshoot, and add more features."
                    ] },
                    friday: { title: "Friday: Weekly Mini-Project Completion & Review", tasks: [
                        "Morning: Finish up your weekly mini-project. Ensure it's functional and presentable.",
                        "Afternoon: Review Session (1-2 hours): Go over all concepts learned this week. Revisit notes, re-do challenging exercises. Identify areas for improvement.",
                        "Code Review (Self or Peer): Look at your project code. How can it be cleaner? More efficient?",
                        "Update Portfolio: Add your completed mini-project to your GitHub or personal portfolio website."
                    ] },
                    saturday: { title: "Saturday: Explore & Experiment / Networking / Job Prep", tasks: [
                        "Explore (1-2 hours): Learn something new that piqued your interest this week, even if it's not directly on your roadmap (e.g., a new CSS trick, a different JavaScript library, a dev tool).",
                        "Networking / Job Prep (1-2 hours): Update your resume/CV and LinkedIn profile with new skills and projects. Refine your LinkedIn profile. Research companies and roles that interest you. Practice coding challenges (e.g., on LeetCode, HackerRank). Attend virtual meetups or webinars if available."
                    ] },
                    sunday: { title: "Sunday: Rest & Recharge", tasks: [
                        "Take a break! Step away from the screen. Engage in hobbies, spend time with family/friends. A rested mind learns better.",
                        "Optional (30 mins): Briefly plan the focus for the upcoming week."
                    ]}
                },
                projectRoadmap: [
                    { title: "Month 1: Frontend Foundations", projects: [
                        { week: "Week 1", description: "A multi-page personal portfolio website (static HTML/CSS)." },
                        { week: "Week 2", description: "Recreate a simple website layout using Flexbox." },
                        { week: "Week 3", description: "A responsive landing page with animations." },
                        { week: "Week 4", description: "A simple interactive web app (e.g., a to-do list, a calculator)." },
                        { week: "Monthly Project", description: "A fully responsive, interactive personal portfolio website using HTML, CSS, and vanilla JavaScript, showcasing your best weekly projects." }
                    ]},
                    { title: "Month 2: Modern Frontend Development (React/Vue/Angular)", projects: [
                        { week: "Week 5", description: "Fetch data from a public API and display it." },
                        { week: "Week 6", description: "Build a small component library or a simple counter app." },
                        { week: "Week 7", description: "A multi-page React application (e.g., a simple blog with different routes)." },
                        { week: "Week 8", description: "A more complex React app that consumes a real (or mock) REST API (e.g., a movie search app)." },
                        { week: "Monthly Project", description: "A fully functional Single Page Application (SPA) using your chosen framework, integrating with a public API, and demonstrating good component structure and state management." }
                    ]},
                    { title: "Month 3: Backend Fundamentals & Full-Stack Integration", projects: [
                        { week: "Week 9", description: "A simple command-line tool using Node.js." },
                        { week: "Week 10", description: "A simple REST API for a to-do list or blog posts." },
                        { week: "Week 11", description: "Integrate your Express API with a database to persist data." },
                        { week: "Week 12", description: "Add basic user authentication to your full-stack application." },
                        { week: "Monthly Project", description: "A full-stack application with a React (or chosen frontend) client, an Express.js backend, and a database (e.g., a simple e-commerce site, a social media clone, or a task management system). Deploy both frontend and backend." }
                    ]},
                    { title: "Beyond Month 3: Continuous Growth & Specialization", projects: [
                        { week: "Deep Dive", description: "Choose an area to specialize or deepen your knowledge (e.g., DevOps, Cloud (AWS/Azure/GCP), specific database, WebSockets, GraphQL, testing, performance optimization)." },
                        { week: "Advanced Projects", description: "Build more complex, real-world applications. Collaborate on open-source projects." },
                        { week: "Continuous Learning", description: "The tech world evolves rapidly. Keep learning new tools and best practices." },
                        { week: "Job Applications", description: "Continue refining your resume, portfolio, and interview skills. Network actively." }
                    ]}
                ],
                goals: [
                    { icon: "üöÄ", text: "Complete at least one robust full-stack application from scratch." },
                    { icon: "üíª", text: "Deepen expertise in React, Node.js/Express, and database interactions." },
                    { icon: "üß†", text: "Master core algorithms and data structures for technical interviews." },
                    { icon: "üìÑ", text: "Apply to 50+ relevant software engineering positions." }
                ],
                resources: [
                    { category: "Frontend", items: [{ name: "MDN Web Docs", url: "https://developer.mozilla.org/en-US/" }, { name: "freeCodeCamp (Frontend Libraries)", url: "https://www.freecodecamp.org/" }, { name: "React Official Docs", url: "https://react.dev/learn" }, { name: "Tailwind CSS Docs", url: "https://v2.tailwindcss.com/docs" }, { name: "Scrimba", url: "https://scrimba.com/home" }] },
                    { category: "Backend", items: [{ name: "Node.js Official Docs", url: "https://nodejs.org/docs/latest/api/" }, { name: "Express.js Docs", url: "https://expressjs.com/" }, { name: "Python Official Docs", url: "https://docs.python.org/3/" }, { name: "PostgreSQL Tutorials", url: "https://www.postgresql.org/docs/online-resources/" }, { name: "freeCodeCamp (Backend/APIs)", url: "https://www.freecodecamp.org/learn/back-end-development-and-apis/" }] },
                    { category: "Algorithms & DS", items: [{ name: "LeetCode", url: "https://leetcode.com/" }, { name: "HackerRank", url: "https://www.hackerrank.com/" }, { name: "freeCodeCamp (Algorithms/DS)", url: "https://www.freecodecamp.org/news/learn-data-structures-and-algorithms/" }] },
                    { category: "Deployment & Version Control", items: [{ name: "AWS Free Tier Tutorials", url: "https://aws.amazon.com/free/" }, { name: "Git Documentation", url: "https://git-scm.com/doc" }, { name: "GitHub Guides", url: "https://github.com/git-guides" }] },
                    { category: "UI Components & Charts", items: [{ name: "Shadcn/ui", url: "https://ui.shadcn.com/" }, { name: "Lucide React", url: "https://lucide.dev/guide/packages/lucide-react" }, { name: "Recharts", url: "https://recharts.org/en-US" }] }
                ],
                progress: {
                    applicationsSent: 0, // This will now be the running total
                    applicationGoal: 50,
                    dailyApplications: {} // Stores applications added per date
                },
                // Structured data for Job Application Strategy
                jobStrategyDetails: [
                    {
                        heading: "Build a Strong Portfolio (Ongoing)",
                        items: [
                            "Your projects are your resume. Make sure they are well-documented, clean, and hosted (e.g., on GitHub Pages, Netlify, Vercel for frontend; Render, Heroku for backend).",
                            "Showcase variety: demonstrate your skills in different areas (responsive design, API integration, database interaction, authentication)."
                        ]
                    },
                    {
                        heading: "Craft a Compelling Resume/CV",
                        items: [
                            "Highlight your projects and the technologies you used.",
                            "Focus on what you can do rather than just what you know.",
                            "Use keywords relevant to the jobs you're applying for.",
                            "Keep it concise and easy to read."
                        ]
                    },
                    {
                        heading: "Optimize Your LinkedIn Profile",
                        items: [
                            "Treat it as an online resume.",
                            "Connect with recruiters and developers in your target companies/industries.",
                            "Share your learning progress and projects."
                        ]
                    },
                    {
                        heading: "Networking",
                        items: [
                            "Attend virtual meetups, webinars, and online conferences.",
                            "Engage in developer communities (Discord, Reddit, Stack Overflow).",
                            "Informational interviews: connect with people in roles you aspire to and ask about their experiences."
                        ]
                    },
                    {
                        heading: "Start Applying (After Month 2/3, or when you feel confident with a few projects)",
                        items: [
                            "Junior Roles: Look for 'Junior Developer,' 'Entry-Level Developer,' 'Associate Developer,' 'Trainee' positions.",
                            "Tailor Applications: Customize your resume and cover letter for each job description.",
                            "Quantity & Quality: Apply to a reasonable number of jobs, but ensure each application is thoughtful.",
                            "Leverage Job Boards: LinkedIn Jobs, Indeed, Glassdoor, local tech job boards."
                        ]
                    },
                    {
                        heading: "Prepare for Interviews",
                        items: [
                            "Technical Interviews: Practice coding challenges (LeetCode, HackerRank), understand data structures and algorithms, be ready to explain your projects.",
                            "Behavioral Interviews: Prepare answers for common questions about teamwork, problem-solving, and handling challenges.",
                            "System Design (for more senior roles, but good to be aware of): Understand how different parts of a system interact."
                        ]
                    },
                    {
                        heading: "Don't Get Discouraged",
                        items: [
                            "Job searching can be tough. Rejection is part of the process.",
                            "Learn from every interview. Ask for feedback if possible.",
                            "Keep building and improving your skills."
                        ]
                    }
                ],
            };

            const state = {
                activeTab: 'today'
            };
            
            let progressChart;
            let dailyApplicationsChart; // New chart instance
            const currentTabTitleEl = document.getElementById('current-tab-title');
            const currentTabDescriptionEl = document.getElementById('current-tab-description');
            const clearAllBtn = document.getElementById('clear-all-btn');
            const dynamicContentArea = document.getElementById('dynamic-content-area'); // Get the new dynamic content area

            const tabInfo = {
                today: { title: "Today's Plan", description: "Daily Learning Plan (Approx. 2-4 hours dedicated study). This is a flexible template. Adjust based on your energy levels and available time.", clearText: "Clear All Tasks" },
                weekly: { title: "Weekly View", description: "Each week will have a primary focus, a mini-project, and dedicated time for review and job prep." },
                roadmap: { title: "Learning Roadmap", description: "This is a suggested progression for your learning journey. Adjust based on your current knowledge and pace." },
                goals: { title: "Goals & Progress", description: "Track your progress towards your overall summer goals." }, // Removed clearText for this tab
                resources: { title: "Resources", description: "A curated list of free resources to aid your learning journey.", clearText: "Clear Search" },
                jobStrategy: { title: "Job Application Strategy", description: "Applying for jobs is a marathon, not a sprint. Here's a comprehensive approach to your job search." }
            };

            // Dynamically inject Job Strategy content when the tab is activated
            function renderJobStrategy() {
                if (dynamicContentArea) {
                    let contentHtml = '';
                    appData.jobStrategyDetails.forEach(section => {
                        contentHtml += `
                            <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm mb-6">
                                <h3 class="text-xl font-bold text-stone-800 mb-4">${section.heading}</h3>
                                <ul class="list-disc list-inside text-stone-600 space-y-2">
                                    ${section.items.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    });
                    contentHtml += `<p class="text-stone-600 mt-2">This plan provides a solid framework. Remember to be flexible, listen to your own learning style, and celebrate your progress along the way. Good luck on your exciting journey into frontend and full-stack development!</p>`;
                    dynamicContentArea.innerHTML = contentHtml;
                    console.log('Job Strategy content injected.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Job Strategy.');
                }
            }

            function renderDailySchedule() {
                if (dynamicContentArea) {
                    let contentHtml = '<div class="space-y-4">'; // Wrap in a div for consistent styling
                    appData.dailySchedule.forEach((item, index) => {
                        const card = `
                            <div class="task-card bg-white p-5 rounded-xl border border-stone-200 shadow-sm transition-all">
                                <div class="flex items-start">
                                    <div class="flex items-center h-5">
                                        <input id="task-${index}" type="checkbox" class="focus:ring-teal-500 h-5 w-5 text-teal-600 border-stone-300 rounded">
                                    </div>
                                    <div class="ml-4 text-sm flex-1">
                                        <label for="task-${index}" class="font-bold text-stone-800">${item.time}: ${item.task}</label>
                                        <p class="text-stone-500">${item.details}</p>
                                    </div>
                                </div>
                            </div>`;
                        contentHtml += card;
                    });
                    contentHtml += '</div>';
                    dynamicContentArea.innerHTML = contentHtml;
                    console.log('Daily Schedule content injected.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Daily Schedule.');
                }
            }

            function resetTodayTasks() {
                // Select checkboxes directly from the dynamic content area
                document.querySelectorAll('#dynamic-content-area input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.closest('.task-card')?.classList.remove('opacity-60'); 
                    const labelElement = checkbox.closest('.task-card')?.querySelector('label'); 
                    if (labelElement) {
                        labelElement.style.textDecoration = 'none';
                    }
                });
            }

            function renderWeeklySchedule() {
                if (dynamicContentArea) {
                    let contentHtml = `
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm h-full">
                                <h3 class="text-xl font-bold mb-4">${appData.weeklySchedule.monToThu.title}</h3>
                                <ul class="space-y-3 list-disc list-inside text-stone-600">
                                    ${appData.weeklySchedule.monToThu.tasks.map(task => `<li>${task}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm h-full">
                                <h3 class="text-xl font-bold mb-4">${appData.weeklySchedule.friday.title}</h3>
                                <ul class="space-y-3 list-disc list-inside text-stone-600">
                                    ${appData.weeklySchedule.friday.tasks.map(task => `<li>${task}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm h-full">
                                <h3 class="text-xl font-bold mb-4">${appData.weeklySchedule.saturday.title}</h3>
                                <ul class="space-y-3 list-disc list-inside text-stone-600">
                                    ${appData.weeklySchedule.saturday.tasks.map(task => `<li>${task}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        <div class="mt-8">
                            <h3 class="text-2xl font-bold text-stone-800 mb-4">Key Projects by Week/Month</h3>
                            ${appData.projectRoadmap.map(month => `
                                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm mb-6">
                                    <h4 class="font-semibold text-stone-700 mb-2">${month.title}</h4>
                                    <ul class="list-disc list-inside text-stone-600 space-y-1">
                                        ${month.projects.map(project => `<li><strong>${project.week}:</strong> ${project.description}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    dynamicContentArea.innerHTML = contentHtml;
                    console.log('Weekly Schedule content injected.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Weekly Schedule.');
                }
            }

            function renderRoadmap() {
                if (dynamicContentArea) {
                    let contentHtml = '<div class="space-y-4">';
                    appData.roadmap.forEach((item, index) => {
                        const accordion = `
                            <div class="accordion-item bg-white rounded-xl border border-stone-200 shadow-sm overflow-hidden">
                                <button class="accordion-header w-full flex justify-between items-center p-5 text-left font-semibold text-stone-800 hover:bg-stone-50">
                                    <span>${item.title}</span>
                                    <span class="transform transition-transform duration-300">‚ñº</span>
                                </button>
                                <div class="accordion-content hidden p-5 border-t border-stone-200 bg-white">
                                    <p class="text-stone-600">${item.content}</p>
                                </div>
                            </div>`;
                        contentHtml += accordion;
                    });
                    contentHtml += '</div>';
                    dynamicContentArea.innerHTML = contentHtml;
                    // Re-attach accordion event listeners
                    document.querySelectorAll('.accordion-header').forEach(header => {
                        header.addEventListener('click', function() {
                            const content = this.nextElementSibling;
                            const icon = this.querySelector('span:last-child');
                            if (content) {
                                content.classList.toggle('hidden');
                            }
                            if (icon) {
                                icon.classList.toggle('rotate-180');
                            }
                        });
                    });
                    console.log('Roadmap content injected.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Roadmap.');
                }
            }
            
            function renderGoals() {
                if (dynamicContentArea) {
                    let contentHtml = `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div id="overall-goals-container" class="space-y-4">
                                ${appData.goals.map(goal => `
                                    <div class="flex items-start bg-white p-4 rounded-xl border border-stone-200 shadow-sm">
                                        <span class="text-2xl mr-4">${goal.icon}</span>
                                        <p class="text-stone-700 font-medium">${goal.text}</p>
                                    </div>
                                `).join('')}
                            </div>
                            <div>
                                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm mb-8">
                                    <h3 class="text-lg font-semibold mb-4">Total Job Application Progress</h3>
                                    <div class="chart-container relative mx-auto">
                                        <canvas id="progressChart"></canvas>
                                    </div>
                                    <div class="mt-6">
                                        <label for="application-count" class="block text-sm font-medium text-stone-600">Add/Subtract applications:</label>
                                        <div class="mt-1 flex rounded-md shadow-sm">
                                            <input type="number" id="application-count" class="block w-full rounded-none rounded-l-md border-stone-300 focus:border-teal-500 focus:ring-teal-500 sm:text-sm" placeholder="e.g., 5 or -2">
                                            <button id="update-progress-btn" class="relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-stone-300 bg-stone-50 px-4 py-2 text-sm font-medium text-stone-700 hover:bg-stone-100 focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500">Update Total</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                                    <h3 class="text-lg font-semibold mb-4">Daily Applications Added</h3>
                                    <div class="daily-chart-container relative mx-auto">
                                        <canvas id="dailyApplicationsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    dynamicContentArea.innerHTML = contentHtml;
                    // Re-initialize charts after content is injected
                    renderProgressChart();
                    renderDailyApplicationsChart();
                    // Re-attach event listeners for dynamically created elements
                    document.getElementById('update-progress-btn')?.addEventListener('click', handleUpdateProgress);
                    document.getElementById('application-count')?.addEventListener('keydown', handleApplicationCountKeydown);
                    console.log('Goals content injected and charts rendered.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Goals.');
                }
            }

            // Moved chart rendering functions outside renderGoals to be callable directly
            function renderProgressChart() {
                const ctx = document.getElementById('progressChart')?.getContext('2d');
                if (!ctx) { console.error('progressChart canvas context not found'); return; }

                // Destroy existing chart instance if it exists
                if (progressChart) {
                    progressChart.destroy();
                }

                const data = {
                    labels: ['Sent', 'Remaining'],
                    datasets: [{
                        data: [appData.progress.applicationsSent, Math.max(0, appData.progress.applicationGoal - appData.progress.applicationsSent)],
                        backgroundColor: ['#14b8a6', '#f1f5f9'],
                        borderColor: ['#0f766e', '#e2e8f0'],
                        borderWidth: 1,
                        hoverOffset: 4
                    }]
                };

                progressChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true
                            }
                        }
                    }
                });
            }

            function renderDailyApplicationsChart() {
                const ctx = document.getElementById('dailyApplicationsChart')?.getContext('2d');
                if (!ctx) { console.error('dailyApplicationsChart canvas context not found'); return; }

                // Destroy existing chart instance if it exists
                if (dailyApplicationsChart) {
                    dailyApplicationsChart.destroy();
                }

                const dates = Object.keys(appData.progress.dailyApplications).sort();
                const dataPoints = dates.map(date => appData.progress.dailyApplications[date]);

                const data = {
                    labels: dates,
                    datasets: [{
                        label: 'Applications Added',
                        data: dataPoints,
                        backgroundColor: '#14b8a6',
                        borderColor: '#0f766e',
                        borderWidth: 1
                    }]
                };

                dailyApplicationsChart = new Chart(ctx, {
                    type: 'bar',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Applications'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Date'
                                }
                            }
                        }
                    }
                });
            }

            function renderResources() {
                if (dynamicContentArea) {
                    let contentHtml = '<input type="text" id="resource-search" class="w-full max-w-lg p-3 mb-6 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500" placeholder="Search for a resource (e.g., React, LeetCode)..."><div id="resources-container" class="space-y-6">';
                    
                    appData.resources.forEach(category => {
                        // Filter items based on current search term (will be re-evaluated on input)
                        const searchTerm = document.getElementById('resource-search')?.value.toLowerCase() || '';
                        const filteredItems = category.items.filter(item => item.name.toLowerCase().includes(searchTerm));
                        
                        if (filteredItems.length > 0) {
                            let itemsHtml = filteredItems.map(item => `
                                <a href="${item.url}" target="_blank" class="block bg-white p-4 rounded-lg border border-stone-200 hover:border-teal-500 hover:shadow-md transition-all">
                                    <p class="font-semibold text-teal-700">${item.name}</p>
                                </a>
                            `).join('');

                            contentHtml += `
                                <div>
                                    <h3 class="text-xl font-bold text-stone-800 mb-4">${category.category}</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        ${itemsHtml}
                                    </div>
                                </div>
                            `;
                        }
                    });
                    contentHtml += '</div>';
                    dynamicContentArea.innerHTML = contentHtml;
                    // Re-attach event listener for search bar after it's in the DOM
                    document.getElementById('resource-search')?.addEventListener('input', renderResources);
                    console.log('Resources content injected.');
                } else {
                    console.error('Error: #dynamic-content-area not found for Resources.');
                }
            }

            function resetResourcesSearch() {
                const resourceSearchInput = document.getElementById('resource-search');
                if (resourceSearchInput) {
                    resourceSearchInput.value = '';
                }
                renderResources();
            }

            function switchTab(tabId) {
                state.activeTab = tabId;
                
                // Clear the dynamic content area first
                if (dynamicContentArea) {
                    dynamicContentArea.innerHTML = '';
                }

                // Update active navigation link styling
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link) { 
                        link.classList.remove('bg-teal-50', 'text-teal-700');
                        if (link.dataset.tab === tabId) {
                            link.classList.add('bg-teal-50', 'text-teal-700');
                        }
                    }
                });

                // Set title and description for the current tab
                if (currentTabTitleEl) {
                    currentTabTitleEl.textContent = tabInfo[tabId]?.title ?? ""; 
                }
                if (currentTabDescriptionEl) {
                    currentTabDescriptionEl.textContent = tabInfo[tabId]?.description ?? ""; 
                }

                // Show/hide Clear All button and set its text based on tab
                if (clearAllBtn) { 
                    if (tabInfo[tabId]?.clearText) {
                        clearAllBtn.classList.remove('hidden');
                        clearAllBtn.textContent = tabInfo[tabId].clearText;
                    } else {
                        clearAllBtn.classList.add('hidden');
                    }
                }

                // Call the appropriate rendering function for the active tab
                switch (tabId) {
                    case 'today': renderDailySchedule(); break;
                    case 'weekly': renderWeeklySchedule(); break;
                    case 'roadmap': renderRoadmap(); break;
                    case 'goals': renderGoals(); break;
                    case 'resources': renderResources(); break;
                    case 'jobStrategy': renderJobStrategy(); break; 
                }
            }

            function clearActiveTab() {
                switch (state.activeTab) {
                    case 'today':
                        resetTodayTasks();
                        break;
                    case 'resources':
                        resetResourcesSearch();
                        break;
                    // No case for 'goals' here, as it no longer has a reset button
                }
            }

            function getFormattedDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            // Event handler for updating progress (moved outside switchTab)
            function handleUpdateProgress() {
                const applicationCountInput = document.getElementById('application-count');
                let newCount = parseInt(applicationCountInput?.value); // Use optional chaining

                if (!isNaN(newCount)) { 
                    const today = getFormattedDate(new Date());

                    appData.progress.dailyApplications[today] = Math.max(0, (appData.progress.dailyApplications[today] || 0) + newCount);
                    appData.progress.applicationsSent = Math.max(0, appData.progress.applicationsSent + newCount); 
                    
                    renderProgressChart();
                    renderDailyApplicationsChart(); 
                    if (applicationCountInput) { // Use optional chaining
                        applicationCountInput.value = ''; 
                    }
                }
            }

            // Event handler for keydown on application count input (moved outside switchTab)
            function handleApplicationCountKeydown(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    handleUpdateProgress(); // Call the shared update function
                }
            }

            // Attach global event listeners
            document.querySelector('.flex')?.addEventListener('click', function(e) { // Use optional chaining
                if (e.target.closest('.nav-link')) {
                    e.preventDefault();
                    switchTab(e.target.closest('.nav-link').dataset.tab);
                }
                // The accordion header listener is now attached within renderRoadmap()
            });
            
            if (clearAllBtn) {
                clearAllBtn.addEventListener('click', clearActiveTab);
            }

            // Initial tab load
            switchTab('today');
            // setInterval(renderDailySchedule, 60000); // Removed for now to prevent potential conflicts during debugging
        });
    </script>
</body>
</html>
